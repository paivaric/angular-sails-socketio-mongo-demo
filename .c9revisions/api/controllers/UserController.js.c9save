{"ts":1372244278069,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/*---------------------\n\t:: User\n\t-> controller\n---------------------*/\nvar bcrypt = require('bcrypt')\n  , SALT_WORK_FACTOR = 10\n  , MIN_PASSWORD_LENGTH = 8;\n\nvar UserController = {\n\tcreate: function(req,res) {\n\t\ttry {\n\t\t\tif(!req.param('password') || req.param('password').length < MIN_PASSWORD_LENGTH) {\n\t\t\t\tthrow new Error(\"password not sent or doesn't meet length requirement (\"+MIN_PASSWORD_LENGTH+\" chars)\");\n\t\t\t}\n\n\t\t\tfunction createUser(hash) {\n\t\t\t\tUser.create({\n          name:      req.param('name'),\n\t\t\t\t\temail:     req.param('email'),\n\t\t\t\t\tpassword:  hash\n\t\t\t\t}).done(function(err,user){\n\t\t\t\t\tif(err) throw err;\n\t\t\t\t\tres.json(user);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tbcrypt.hash(req.param('password'),SALT_WORK_FACTOR,function(err, hash){\n\t\t\t\tif(err) throw err;\n\t\t\t\tcreateUser(hash);\n\t\t\t});\n\n\t\t} catch(e) {\n\t\t\treturn res.json({ error : e.message },500);\n\t\t}\n\t}\n};\nmodule.exports = UserController;"]],"start1":0,"start2":0,"length1":0,"length2":890}]],"length":890}
{"contributors":[],"silentsave":false,"ts":1372244813288,"patch":[[{"diffs":[[0,"reate({\n"],[1,"          "],[0,"        "]],"start1":461,"start2":461,"length1":16,"length2":26}]],"length":900,"saved":false}
